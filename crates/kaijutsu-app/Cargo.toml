[package]
name = "kaijutsu-app"
version.workspace = true
edition.workspace = true
description = "Bevy GUI client for kaijutsu"

[features]
default = []
telemetry = ["kaijutsu-telemetry/telemetry"]

[dependencies]
kaijutsu-crdt = { path = "../kaijutsu-crdt" }
kaijutsu-client = { path = "../kaijutsu-client" }
kaijutsu-kernel = { path = "../kaijutsu-kernel" }

# kaish (for syntax validation)
kaish-kernel.workspace = true
logos = "0.16"  # For Token::lexer trait

bevy = { version = "0.18", features = ["default", "bevy_ui_debug"] }
bevy_brp_extras.workspace = true  # includes RemotePlugin
bevy_tweening = { git = "https://github.com/djeedai/bevy_tweening", branch = "main" }  # Smooth animations

# Text rendering (MSDF-based)
cosmic-text.workspace = true
pulldown-cmark.workspace = true
# Font metrics for shader-based hinting
swash = "0.2"

# MSDF generation
msdfgen = { git = "https://github.com/katyo/msdfgen-rs", rev = "5e62bcf", default-features = false, features = ["ttf-parser"] }
owned_ttf_parser = "0.19"  # Must match msdfgen's ttf-parser version for FontExt trait
rect_packer = "0.2"
bytemuck = { version = "1.21", features = ["derive"] }

# Serialization
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
ron = "0.8"

# Logging + Telemetry
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter"] }
tracing-appender = "0.2"
kaijutsu-telemetry = { workspace = true }

# Error handling
thiserror.workspace = true

arboard.workspace = true

tokio.workspace = true
tokio-util.workspace = true
futures.workspace = true
log.workspace = true
whoami.workspace = true
uuid = { version = "1.0", features = ["v4"] }
dirs = "5.0"
hostname = "0.3"

# Cap'n Proto (for block events callback)
capnp.workspace = true
capnp-rpc.workspace = true

# Scripting (for theme system)
rhai.workspace = true

[dev-dependencies]
# Image handling for GPU tests
image = "0.25"
crossbeam-channel = "0.5"
