[package]
name = "kaijutsu-kernel"
version.workspace = true
edition.workspace = true
description = "Core kernel with VFS abstraction for kaijutsu"

[dependencies]
tokio = { version = "1", features = ["fs", "sync", "time", "io-util"] }
async-trait = "0.1"
anyhow = "1"
thiserror = "2"
serde = { version = "1", features = ["derive"] }
serde_json = "1"
uuid = { version = "1", features = ["v4", "serde"] }
tracing = "0.1"

# CRDT (text collaboration)
diamond-types.workspace = true

# Persistence
rusqlite.workspace = true

# Scripting
rhai.workspace = true

[target.'cfg(unix)'.dependencies]
rustix = { version = "0.38", features = ["fs"] }

[dev-dependencies]
tokio = { version = "1", features = ["rt-multi-thread", "macros"] }
tempfile = "3"
